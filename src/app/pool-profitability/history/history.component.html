<mat-tab-group
  fxFlexFill
  msuDimensions
  #dimensions="msuDimensions"
  (selectedIndexChange)="tabChanged($event)"
>
  <mat-tab>
    <ng-template mat-tab-label>
      <span fxShow fxHide.lt-sm>Last 120 minutes</span>
      <span fxHide fxShow.lt-sm>120m</span>
    </ng-template>
    <ng-container *ngIf="selectedTab === 0 && minuteData | async as loadedData; else loading">
      <msu-graph
        [size]="[dimensions.value[0], dimensions.value[0] * 0.75]"
        [data]="loadedData"
        [showLabel]="[false, !(isXS | async)]"
        [showAxis]="[!(isXS | async), true]"
      >
      </msu-graph>
    </ng-container>
  </mat-tab>
  <mat-tab fxFlexFill>
    <ng-template mat-tab-label>
      <span fxShow fxHide.lt-sm>Last 48 hours</span>
      <span fxHide fxShow.lt-sm>48h</span>
    </ng-template>
    <ng-container *ngIf="selectedTab === 1 && hourData | async as loadedData; else loading">
      <msu-graph
        [size]="[dimensions.value[0], dimensions.value[0] * 0.75]"
        [data]="loadedData"
        [showLabel]="[false, !(isXS | async)]"
        [showAxis]="[!(isXS | async), true]"
      >
      </msu-graph>
    </ng-container>
  </mat-tab>
  <mat-tab fxFlexFill>
    <ng-template mat-tab-label>
      <span fxShow fxHide.lt-sm>Last 30 days</span>
      <span fxHide fxShow.lt-sm>30d</span>
    </ng-template>
    <ng-container *ngIf="selectedTab === 2 && dayData | async as loadedData; else loading">
      <msu-graph
        [size]="[dimensions.value[0], dimensions.value[0] * 0.75]"
        [data]="loadedData"
        [showLabel]="[false, !(isXS | async)]"
        [showAxis]="[!(isXS | async), true]"
      >
      </msu-graph>
    </ng-container>
  </mat-tab>
</mat-tab-group>

<ng-template #loading>
  <div fxFlexFill fxLayout="column" fxLayoutAlign="center center">
    <mat-spinner></mat-spinner>
  </div>
</ng-template>
